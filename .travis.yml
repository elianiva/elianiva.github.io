language: node_js
node_js:
  - "node"
install:
  # install gatsby and any dependencies inside ./package.json
  - npm install
script:
  # run generator
  - gatsby build
  # create .nojekyll files
  # We are telling GitHub to not process this branch using jekyll
  - touch .nojekyll
deploy:
  provider: pages
  skip_cleanup: true
  keep-history: true
  github_token: $GH_TOKEN # Set in travis-ci.org dashboard later
  target_branch: master
  # folder that generated by your SSG.
  # will be pushed to the master branch by travis
  local_dir: public
  on:
    branch: source # branch name of the source code
